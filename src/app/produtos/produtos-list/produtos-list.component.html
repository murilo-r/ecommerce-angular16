<div class="p-4">
  <div class="header-list flex" style="justify-content: space-between; align-items:center; flex-wrap:wrap;">
    <div>
      <h2>Produtos</h2>
    </div>
<div class="filters">
  <div class="input-group">
    <span class="icon-search" aria-hidden="true">üîç</span>
    <input
      aria-label="Buscar"
      placeholder="Buscar..."
      [value]="searchText"
      (input)="onBuscaChange($any($event.target).value)"
      class="search-input"
    />
  </div>

  <div class="input-group select-group">
    <select aria-label="Departamento" (change)="onDeptChange($any($event.target).value)">
      <option value="">Todos Departamentos</option>
      <option *ngFor="let d of departamentos" [value]="d.codigo">{{ d.descricao }}</option>
    </select>
    <span class="chevron">‚ñæ</span>
  </div>

  <button (click)="buscar()" class="btn btn-primary btn-sm">Buscar</button>
  <button routerLink="/produtos/novo" class="btn btn-primary btn-sm">+ Novo Produto</button>
</div>
  </div>

  <div *ngIf="loading" style="margin-top:1rem;">Carregando...</div>

  <table *ngIf="!loading" class="full-width" style="margin-top:1rem; border-collapse:collapse;">
    <thead>
      <tr>
        <th>C√≥digo</th>
        <th>Descri√ß√£o</th>
        <th>Departamento</th>
        <th>Pre√ßo</th>
        <th>Status</th>
        <th style="text-align:right;">A√ß√µes</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let p of paged">
        <td>{{ p.codigo }}</td>
        <td>{{ p.descricao }}</td>
        <td>{{ p.departamentoCodigo }}</td>
        <td>{{ p.preco | currency:'BRL' }}</td>
        <td>
          <span [class]="p.status ? 'badge status-active' : 'badge status-inactive'">
            {{ p.status ? 'Ativo' : 'Inativo' }}
          </span>
        </td>
        <td style="text-align:right;">
          <button (click)="editar(p)" class="btn btn-sm">Editar</button>
          <button (click)="excluir(p)" class="btn btn-sm" style="margin-left:4px;">Excluir</button>
        </td>
      </tr>
    </tbody>
  </table>

  <div *ngIf="!loading && filtered.length === 0" style="margin-top:1rem;">
    Nenhum produto encontrado.
  </div>

  <div class="pagination" *ngIf="filtered.length > pageSize" style="margin-top:1rem; display:flex; gap:8px; align-items:center;">
    <button (click)="mudarPagina(-1)" [disabled]="page === 1" class="btn btn-sm">Anterior</button>
    <div> P√°gina {{ page }} de {{ totalPages() }} </div>
    <button (click)="mudarPagina(1)" [disabled]="page === totalPages()" class="btn btn-sm">Pr√≥xima</button>
  </div>
</div>
