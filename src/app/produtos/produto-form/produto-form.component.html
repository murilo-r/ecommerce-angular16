<div class="p-4 card">
  <h2>{{ isEdit ? 'Editar' : 'Novo' }} Produto</h2>

  <div *ngIf="loading">Carregando...</div>

  <form [formGroup]="form" (ngSubmit)="salvar()" *ngIf="!loading">
    <div class="form-row">
      <div>
        <label>Código</label>
        <input formControlName="codigo" />
        <div *ngIf="form.controls['codigo'].invalid && form.controls['codigo'].touched" class="error">
          Código obrigatório.
        </div>
      </div>
      <div>
        <label>Descrição</label>
        <input formControlName="descricao" />
        <div *ngIf="form.controls['descricao'].invalid && form.controls['descricao'].touched" class="error">
          Descrição obrigatória.
        </div>
      </div>
    </div>

    <div class="form-row">
      <div>
        <label>Departamento</label>
        <select formControlName="departamentoCodigo">
          <option value="">Selecione</option>
          <option *ngFor="let d of departamentos" [value]="d.codigo">{{ d.descricao }}</option>
        </select>
      </div>
      <div>
        <label>Preço</label>
        <input type="number" step="0.01" formControlName="preco" />
      </div>
      <div>
        <label>Status</label>
        <input type="checkbox" formControlName="status" /> Ativo
      </div>
    </div>

    <div style="margin-top:1rem;">
      <button type="submit" class="btn btn-primary">{{ isEdit ? 'Atualizar' : 'Criar' }}</button>
      <button type="button" class="btn btn-sm" (click)="voltar()">Cancelar</button>
    </div>
  </form>
</div>
